# 1. 确保安装/更新核心库
pip install -U huggingface_hub

# 2. 运行下载脚本（直接在命令行执行这一段）
python3 -c "
import os
# 强制设置环境变量，确保没有空格
os.environ['HF_ENDPOINT'] = 'https://hf-mirror.com'

from huggingface_hub import snapshot_download
import shutil

repo_id = 'sentence-transformers/all-MiniLM-L6-v2'
local_dir = 'models/all-MiniLM-L6-v2'

print(f'正在从 {os.environ[\"HF_ENDPOINT\"]} 下载 {repo_id}...')

try:
    snapshot_download(
        repo_id=repo_id,
        local_dir=local_dir,
        local_dir_use_symlinks=False,
        endpoint=os.environ['HF_ENDPOINT'] # 显式指定 endpoint
    )
    print(f'\n下载成功！模型已保存至: {os.path.abspath(local_dir)}')
except Exception as e:
    print(f'\n下载失败。错误详情: {e}')
    print('\n提示：如果依然报错 Distant resource...，请执行 curl -I https://hf-mirror.com 检查网络连通性。')
"